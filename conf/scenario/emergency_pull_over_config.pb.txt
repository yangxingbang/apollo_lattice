scenario_type: EMERGENCY_PULL_OVER
emergency_pull_over_config: {
  max_stop_deceleration: 4.5
  slow_down_deceleration_time: 3.0
  target_slow_down_speed: 6.0
  stop_distance: 1.5
}

stage_type: EMERGENCY_PULL_OVER_SLOW_DOWN
stage_type: EMERGENCY_PULL_OVER_APPROACH
stage_type: EMERGENCY_PULL_OVER_STANDBY

stage_config: {
  stage_type: EMERGENCY_PULL_OVER_SLOW_DOWN
  enabled: true
  task_type: PATH_LANE_BORROW_DECIDER
  task_type: PATH_BOUNDS_DECIDER
  task_type: PIECEWISE_JERK_PATH_OPTIMIZER
  task_type: PATH_ASSESSMENT_DECIDER
  task_type: PATH_DECIDER
  task_type: RULE_BASED_STOP_DECIDER
  task_type: ST_BOUNDS_DECIDER
  task_type: SPEED_BOUNDS_PRIORI_DECIDER
  task_type: DP_ST_SPEED_OPTIMIZER
  task_type: SPEED_DECIDER
  task_type: SPEED_BOUNDS_FINAL_DECIDER
  task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  task_config: {
    task_type: PATH_LANE_BORROW_DECIDER
  }
  task_config: {
    task_type: PATH_BOUNDS_DECIDER
  }
  task_config: {
    task_type: PIECEWISE_JERK_PATH_OPTIMIZER
  }
  task_config: {
    task_type: PATH_ASSESSMENT_DECIDER
  }
  task_config: {
    task_type: PATH_DECIDER
  }
  task_config: {
    task_type: DP_ST_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: SPEED_DECIDER
  }
  task_config: {
    task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: SPEED_BOUNDS_PRIORI_DECIDER
  }
  task_config: {
    task_type: SPEED_BOUNDS_FINAL_DECIDER
  }
  task_config: {
    task_type: RULE_BASED_STOP_DECIDER
  }
  task_config: {
    task_type: ST_BOUNDS_DECIDER
  }
}

stage_config: {
  stage_type: EMERGENCY_PULL_OVER_APPROACH
  enabled: true
  # task_type: PATH_LANE_BORROW_DECIDER
  task_type: PATH_BOUNDS_DECIDER
  task_type: PIECEWISE_JERK_PATH_OPTIMIZER
  task_type: PATH_ASSESSMENT_DECIDER
  task_type: PATH_DECIDER
  task_type: RULE_BASED_STOP_DECIDER
  task_type: ST_BOUNDS_DECIDER
  task_type: SPEED_BOUNDS_PRIORI_DECIDER
  task_type: DP_ST_SPEED_OPTIMIZER
  task_type: SPEED_DECIDER
  task_type: SPEED_BOUNDS_FINAL_DECIDER
  task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  task_type: DECIDER_RSS

  task_config: {
    task_type: PATH_LANE_BORROW_DECIDER
  }
  task_config: {
    task_type: PATH_BOUNDS_DECIDER
    path_bounds_decider_config {
      is_lane_borrowing: false
      is_pull_over: true
      pull_over_destination_to_adc_buffer: 25.0
      pull_over_destination_to_pathend_buffer: 10.0
      pull_over_road_edge_buffer: 0.0
      pull_over_approach_lon_distance_adjust_factor: 5.0
    }
  }
  task_config: {
    task_type: PIECEWISE_JERK_PATH_OPTIMIZER
    piecewise_jerk_path_config {
      default_path_config {
        l_weight: 5.0
        dl_weight: 10000.0
        ddl_weight: 200000.0
        dddl_weight: 500000.0
      }
      lane_change_path_config {
        l_weight: 1.0
        dl_weight: 5.0
        ddl_weight: 800.0
        dddl_weight: 30000.0
      }
    }
  }
  task_config: {
    task_type: PATH_ASSESSMENT_DECIDER
  }
  task_config: {
    task_type: PATH_DECIDER
  }
  task_config: {
    task_type: SPEED_BOUNDS_PRIORI_DECIDER
  }
  task_config: {
    task_type: SPEED_BOUNDS_FINAL_DECIDER
  }
  task_config: {
    task_type: DP_ST_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: SPEED_DECIDER
  }
  task_config: {
    task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: DECIDER_RSS
  }
  task_config: {
    task_type: RULE_BASED_STOP_DECIDER
  }
  task_config: {
    task_type: ST_BOUNDS_DECIDER
  }
}

stage_config: {
  stage_type: EMERGENCY_PULL_OVER_STANDBY
  enabled: true
  task_type: PATH_LANE_BORROW_DECIDER
  task_type: PATH_BOUNDS_DECIDER
  task_type: PIECEWISE_JERK_PATH_OPTIMIZER
  task_type: PATH_ASSESSMENT_DECIDER
  task_type: PATH_DECIDER
  task_type: RULE_BASED_STOP_DECIDER
  task_type: ST_BOUNDS_DECIDER
  task_type: SPEED_BOUNDS_PRIORI_DECIDER
  task_type: DP_ST_SPEED_OPTIMIZER
  task_type: SPEED_DECIDER
  task_type: SPEED_BOUNDS_FINAL_DECIDER
  task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  task_config: {
    task_type: PATH_LANE_BORROW_DECIDER
  }
  task_config: {
    task_type: PATH_BOUNDS_DECIDER
  }
  task_config: {
    task_type: PIECEWISE_JERK_PATH_OPTIMIZER
  }
  task_config: {
    task_type: PATH_ASSESSMENT_DECIDER
  }
  task_config: {
    task_type: PATH_DECIDER
  }
  task_config: {
    task_type: DP_ST_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: SPEED_DECIDER
  }
  task_config: {
    task_type: PIECEWISE_JERK_SPEED_OPTIMIZER
  }
  task_config: {
    task_type: SPEED_BOUNDS_PRIORI_DECIDER
  }
  task_config: {
    task_type: SPEED_BOUNDS_FINAL_DECIDER
  }
  task_config: {
    task_type: RULE_BASED_STOP_DECIDER
  }
  task_config: {
    task_type: ST_BOUNDS_DECIDER
  }
}